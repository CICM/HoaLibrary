<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="_c74_vig.xsl" type="text/xsl"?>
<vignette name="The DLS Synthesizer">
	<header1>
	The DLS Synthesizer
	</header1>
		<bodytext>
			Max uses the DLS synthesizer as its default MIDI output destination. You can send
			data directly from Max via MIDI to produce sound without using any external MIDI gear.
		</bodytext>
		<bodytext>
			On the Macintosh, the default MIDI output is an AudioUnit DLS (Down-Loadable-Sounds)
			synthesizer. The AU DLS synth supports its own set of internal sounds as a General MIDI
			bank, and also provides support for Level 2 SoundFont files.
		</bodytext>
		<bodytext>
			On Windows systems, the default MIDI output is the Microsoft DirectMusic DLS (Downloadable
			Soundfont) synthesizer (Note: the Microsoft DLS synthesizer does not support SoundFont files)
		</bodytext>
		<bodytext>
			Only one port for the DLS synth is created by default. (augraph on Mac OS X or midi_dm
			(on Windows). However, you can work with more than one DLS synth by creating additional
			MIDI synthesizer ports and assigning new DLS sound bank files to each one.
		</bodytext>
		<bodytext>
			Addressing the DLS synthesizers currently requires that you send
			<link type="vignette" module="core" name="messages_to_max">messages to the Max application</link>
			by typing a semicolon followed by a message text into a message
			box, then clicking on the <link type="refpage" name="message">message box</link>.
		</bodytext>
			
	<bluebox>
	<header2>
	Creating a new port for a DLS synth
	</header2>
		<ul>
		<li>
			Double-click anywhere in an unlocked Patcher window to show the Object Explorer
		</li>
		<li>
			Click on the <link type="refpage" name="message">message box</link> icon. The Object Explorer will disappear and a <link type="refpage" name="message">message box</link> will appear with an active text cursor.
		</li>
		<li>
			To create a new port, type
		</li>
		</ul>
		<bodytext>
			<tab />;#SM createoutport &lt;portname&gt; &lt;drivername&gt;
		</bodytext>
		<bodytext>
			into the <link type="refpage" name="message">message box</link>, replacing &lt;drivername&gt; with the name of the driver you
			want to use (midi_dm on Windows and augraph on the Macintosh) and  &lt;portname&gt;
			with the name you want to give to your virtual output port. Note that the message starts with a semicolon.
		</bodytext>
		<ul>
		<li>
			Lock the patcher window, and click in the <link type="refpage" name="message">message box</link> to send the message to Max.
		</li>
		</ul>
	</bluebox>
	<br />
		<bodytext>
			For example, the clicking on the following <link type="refpage" name="message">message box</link> in a Max patch will
			create a second DLS synth called “synth2” in a Macintosh system:
		</bodytext>
		<bodytext>
			<tab />;#SM createoutport synth2 augraph
		</bodytext>
		<bodytext>
			Clicking on the following <link type="refpage" name="message">message box</link> in a Max patch will create a second DLS
			synth called “othersynth” on a Windows system:
		</bodytext>
		<bodytext>
			<tab />;#SM createoutport othersynth midi_dm
		</bodytext>
	<br />
	<bluebox>
	<header2>
	Deleting a DLS synth port
	</header2>
		<ul>
		<li>
			Double-click anywhere in an unlocked Patcher window to show the Object Explorer.
		</li>
		<li>
			Click on the <link type="refpage" name="message">message box</link> icon. The Object Explorer will disappear and a <link type="refpage" name="message">message box</link> will appear with an active text cursor.
		</li>
		</ul>
		<bodytext>
			To delete a port, type
		</bodytext>
		<bodytext>
			<tab />;#SM deleteoutport &lt;portname&gt; &lt;drivername&gt;
		</bodytext>
		<bodytext>
			into the <link type="refpage" name="message">message box</link>, replacing &lt;drivername&gt; with the name of the driver you
			want to use (midi_dm on Windows and augraph on the Macintosh) and  &lt;portname&gt;
			with the name you want to delete. Note that the message starts with a semicolon.
		</bodytext>
		<ul>
		<li>
			Lock the patcher window, and click in the <link type="refpage" name="message">message box</link> to send the message to Max.
		</li>
		</ul>
	</bluebox>
	<br />
		<bodytext>
			For example, the clicking on the following <link type="refpage" name="message">message box</link> in a Max patch will delete
			the DLS synth called “synth2” in a Macintosh system:
		</bodytext>
		<bodytext>
			<tab />;#SM deleteoutport synth2 augraph
		</bodytext>
		<bodytext>
			Clicking on the following <link type="refpage" name="message">message box</link> in a Max patch will delete the DLS synth
			called “othersynth” on a Windows system:
		</bodytext>
		<bodytext>
			<tab />;#SM deleteoutport othersynth midi_dm
		</bodytext>
			
		<bodytext>
			You can load type 1 or 2 sound banks by sending messages to the Max application.
		</bodytext>
	<br />
	<bluebox>
	<header2>
	Loading a Bank of Sounds on a DLS Synth (type 1 or 2)
	</header2>
		<ul>
		<li>
			Double-click anywhere in an unlocked Patcher window to show the Object Explorer.
		</li>
		<li>
			Click on the <link type="refpage" name="message">message box</link> icon. The Object Explorer will disappear and
			a <link type="refpage" name="message">message box</link> will appear with an active text cursor.
		</li>
		</ul>
		<bodytext>
			To delete a new bank of sounds into a DLS synth, type
		</bodytext>
		<bodytext>
			<tab />;#SM driver loadbank &lt;filename&gt; &lt;portname&gt;
		</bodytext>
		<bodytext>
			into the <link type="refpage" name="message">message box</link>, replacing &lt;filename&gt; is the name of an existing DLS bank file,
			and &lt;portname&gt; with the name of the port that will use this bank. If you omit
			the &lt;portname&gt; argument from the <link type="refpage" name="message">message box</link>, the bank you specify fill be
			loaded by all DLS ports. On Macintosh systems, the folder <i>/Library/Audio/Sounds/Banks</i>
			is added to the search path when looking for a DLS bank file (i.e. it is the default location
			for searching for sound bank files).
		</bodytext>
		<bodytext>
			Note that the message starts with a semicolon.
		</bodytext>
		<ul>
		<li>
			Lock the patcher window, and click in the <link type="refpage" name="message">message box</link> to send the message to Max.
		</li>
		</ul>
		<bodytext>
			If you specify a zero (0) for the filename, the default GM (General MDI) sound bank
			will be loaded (e.g., ;#SM driver loadbank 0 &lt;portname&gt;)
		</bodytext>
	</bluebox>
			
			
		<bodytext>
			You can turn reverb on or off (the default state) by sending messages to the Max application:
		</bodytext>
	<br />
	<bluebox>
	<header2>
	Turning Reverb On and Off
	</header2>
		<ul>
		<li>
			Double-click anywhere in an unlocked Patcher window to show the Object Explorer.
		</li>
		<li>
			Click on the <link type="refpage" name="message">message box</link> icon. The Object Explorer will disappear and a <link type="refpage" name="message">message box</link>
			will appear with an active text cursor.
		</li>
		</ul>
		<bodytext>
			To enable reverb, type
		</bodytext>
		<bodytext>
			<tab />;#SM driver reverb 1 &lt;portname&gt;
		</bodytext>
		<bodytext>
			To disable reverb, type
		</bodytext>
		<bodytext>
			<tab />;#SM driver reverb 0 &lt;portname&gt;
		</bodytext>
		<bodytext>
			into the <link type="refpage" name="message">message box</link>, replacing &lt;portname&gt; with the name of the port.
		</bodytext>
		<bodytext>
			Note that the message starts with a semicolon.
		</bodytext>
		<ul>
		<li>
			Lock the patcher window, and click in the <link type="refpage" name="message">message box</link> to send the message to Max.
		</li>
		</ul>
	</bluebox>
			
		<bodytext>
			If you're running Max on a Windows system, you can set an output latency value for  MIDI output.
		</bodytext>
	<br />
	<bluebox>
	<header2>
	Setting  MIDI Output Latency (Windows systems only)
	</header2>
		<ul>
		<li>
			Double-click anywhere in an unlocked Patcher window to show the Object Explorer.
		</li>
		<li>
			Click on the <link type="refpage" name="message">message box</link> icon. The Object Explorer will disappear and a
			<link type="refpage" name="message">message box</link> will appear with an active text cursor.
		</li>
		</ul>
		<bodytext>
			To set MIDI output latency, type
		</bodytext>
		<bodytext>
			<tab />;#SM driver latency &lt;time&gt; midi_dm
		</bodytext>
		<bodytext>
			into the <link type="refpage" name="message">message box</link>, replacing &lt;time&gt; with a time value in milliseconds.
		</bodytext>
		<bodytext>
			Note that the message starts with a semicolon.
		</bodytext>
		<ul>
		<li>
			Lock the patcher window, and click in the <link type="refpage" name="message">message box</link> to send the message to Max.
		</li>
		</ul>
	</bluebox>
	<br />
		<bodytext>
			For example, the following message would set the latency to 10 milliseconds:
		</bodytext>
		<bodytext>
			<tab />;#SM driver latency 10 portname
		</bodytext>
			
</vignette>
