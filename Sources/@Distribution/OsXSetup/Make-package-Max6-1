#!/bin/bash

VERSION="1.2"
LIBRARY="HoaLibrary"
MAXDISTRIB="Max6.1-32bit"
PLATEFORM="Mac"

## current DIR (Make)
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

## Actual Working DIRs
WORKDIR_MAX6="../../../MaxMsp/Max6"
## destination Folder
DESTINATION_FOLDER="$LIBRARY"
## distribution Folder
DISTRIBUTION_FOLDER="$LIBRARY-$VERSION-$PLATEFORM-$MAXDISTRIB"

## Actual Working Folders
WORKDIR_PATCHES="$WORKDIR_MAX6/patches"
WORKDIR_CLIPPINGS="$WORKDIR_PATCHES/clippings"
WORKDIR_DOCS="$WORKDIR_PATCHES/docs"
WORKDIR_HOAREF="$WORKDIR_DOCS/refpages/hoa-ref/"
WORKDIR_EXTRAS="$WORKDIR_PATCHES/extras"
WORKDIR_EXAMPLES="$WORKDIR_MAX6/examples"
#
WORKDIR_CYCLING74="$WORKDIR_MAX6/Cycling '74"
WORKDIR_INIT="$WORKDIR_CYCLING74/init"
WORKDIR_PALETTES="$WORKDIR_CYCLING74/object-palettes"
#
WORKDIR_HOAFOLDER="$WORKDIR_CYCLING74/HoaLibrary"
WORKDIR_MEDIA="$WORKDIR_HOAFOLDER/media/"
WORKDIR_EFFECTS="$WORKDIR_HOAFOLDER/effects"
WORKDIR_EXTERNALS_OSX="$WORKDIR_HOAFOLDER/externals/OsX/"
WORKDIR_EXTERNALS_JS="$WORKDIR_HOAFOLDER/externals/jsExternals/"
WORKDIR_HELPS="$WORKDIR_HOAFOLDER/helps/"
WORKDIR_OPERATORS="$WORKDIR_HOAFOLDER/operators"
WORKDIR_OTHERS="$WORKDIR_HOAFOLDER/others"
#
HRTFPACK="../../../MaxMsp/HrtfDatabase"


## Max6.1 Package directory's
PACKAGE61="$LIBRARY-$VERSION"
PACKDIR_CLIPPINGS="$PACKAGE61/clippings"
PACKDIR_DOCS="$PACKAGE61/docs"
PACKDIR_MEDIA="$PACKAGE61/media"
PACKDIR_EXTERNALS="$PACKAGE61/externals"
PACKDIR_EXTERNALS_JS="$PACKAGE61/javascript"
PACKDIR_HELP="$PACKAGE61/help"
PACKDIR_EXAMPLES="$PACKAGE61/examples"
PACKDIR_MISC="$PACKAGE61/misc"
PACKDIR_PATCHERS="$PACKAGE61/patchers"
PACKDIR_OBJECTPROTO="$PACKAGE61/object-prototypes"

## specifics files
SPEC_FOLDER="Max6.1_specifics"
SPEC_DOCS="$SPEC_FOLDER/docs/"
SPEC_INTERFACES="$SPEC_FOLDER/interfaces"
SPEC_SOURCES="$SPEC_FOLDER/sources"
SPEC_README="$SPEC_FOLDER/README.txt"

## Package Max6.1 Mac
cd $DIR
mkdir $PACKAGE61
## Copy clippings :
cp -pR $WORKDIR_CLIPPINGS $PACKAGE61
## Copy docs :
mkdir $PACKDIR_DOCS
cp -pR $WORKDIR_HOAREF $PACKDIR_DOCS
cp -pR $SPEC_DOCS $PACKDIR_DOCS
## Copy extras :
cp -pR $WORKDIR_EXTRAS $PACKAGE61
## Create Medias Folder :
mkdir $PACKDIR_MEDIA
cp -pR $WORKDIR_MEDIA $PACKDIR_MEDIA
## Copy externals :
mkdir $PACKDIR_EXTERNALS
cp -pR "$WORKDIR_EXTERNALS_OSX" $PACKDIR_EXTERNALS
## Copy helps :
mkdir $PACKDIR_HELP
cp -pR "$WORKDIR_HELPS" $PACKDIR_HELP
## Create Examples Folder :
#mkdir $PACKDIR_EXAMPLES
## Copy init :
cp -pR "$WORKDIR_INIT" $PACKAGE61
## Copy JS :
mkdir $PACKDIR_EXTERNALS_JS
cp -pR "$WORKDIR_EXTERNALS_JS" $PACKDIR_EXTERNALS_JS
## Create interface folder :
cp -pR $SPEC_INTERFACES $PACKAGE61
## Create Misc Folder and copy object-palette & others:
mkdir $PACKDIR_MISC
cp -pR "$WORKDIR_PALETTES" $PACKDIR_MISC
cp -pR "$WORKDIR_OTHERS" $PACKDIR_MISC
## Create Patchers Folder and copy Effects & Operators:
mkdir $PACKDIR_PATCHERS
cp -pR "$WORKDIR_EFFECTS" $PACKDIR_PATCHERS
cp -pR "$WORKDIR_OPERATORS" $PACKDIR_PATCHERS
## Create Object-prototypes Folder :
mkdir $PACKDIR_OBJECTPROTO
## Create Sources Folder :
cp -pR $SPEC_SOURCES $PACKAGE61
## Copy licence and readme
cp -pR license.rtf $PACKAGE61
cp -pR $SPEC_README $PACKAGE61


## Copy package in LIBRARY Folder
mkdir $DISTRIBUTION_FOLDER
cp -pR $HRTFPACK $DISTRIBUTION_FOLDER
cp -pR $SPEC_README $DISTRIBUTION_FOLDER
mv $PACKAGE61 $DISTRIBUTION_FOLDER

# Copy HRTFDATABASE

mkdir $LIBRARY
mv $DISTRIBUTION_FOLDER $LIBRARY