max v2;#N vpatcher 334 44 979 689;#P origin 4 0;#P window setfont "Sans Serif" 9.;#P hidden newex 546 539 46 196617 onecopy;#P message 463 586 70 196617 ambi.decode~;#P message 387 586 70 196617 ambi.weight~;#P message 463 533 75 196617 ambi.encoden~;#P comment 387 517 53 196617 see also:;#P message 463 559 71 196617 ambi.mirror~;#P message 387 559 68 196617 ambi.rotate~;#P message 387 533 70 196617 ambi.encode~;#P hidden newex 546 584 47 196617 pcontrol;#P hidden newex 546 561 66 196617 prepend help;#P newex 388 474 156 196617 ambi.rotate~ 2d 1st degrees 90.;#P comment 347 218 225 196617 Angle format: "radians" (default) or "degrees";#P window linecount 2;#P comment 347 190 270 196617 Order: "1st" (default) \, "2nd" or "3rd" (or optionally "1st-order" etc.);#P window linecount 1;#P comment 347 176 270 196617 Dimensions: "2D" (default) or "3D";#P hidden newex 278 404 69 196617 loadmess 0.5;#P hidden newex 210 404 60 196617 loadmess 1;#P flonum 291 432 35 9 0. 1. 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 291 455 50 196617 width \$1;#P comment 481 377 65 196617 or roll \$1;#P comment 409 377 65 196617 or pitch \$1;#P comment 339 377 65 196617 or yaw \$1;#P window linecount 4;#P comment 374 410 209 196617 NOTE: ambi.rotate~ will bypass expensive calculations for tilt & tumble if instantiated for 2D rotation \, or if both tilt & tumble are set to 0.;#P window linecount 1;#P newex 234 120 31 196617 adc~;#P message 267 560 27 196617 stop;#P message 197 560 65 196617 startwindow;#P user panel 189 553 113 30;#X brgb 255 255 255;#X frgb 100 202 30;#X border 2;#X rounded 0;#X shadow 0;#X done;#P comment 347 260 242 196617 initial tumble / roll value (around y axis);#P comment 347 246 242 196617 initial tilt /pitch value (around x axis);#P comment 347 232 242 196617 initial yaw/rotate value (around z axis);#P comment 330 159 205 196617 ambi.rotate~ arguments:;#P window linecount 3;#P comment 330 120 289 196617 ambi.rotate~ can rotate an encoded ambisonic soundfield around one of the principal axes. This example shows a 3-D 1st order encoding (also known as B-format).;#P window linecount 1;#P comment 12 62 300 196617 www.grahamwakefield.net;#P comment 12 50 300 196617 Graham Wakefield \, March 2006;#P newex 499 65 108 196617 ambi.conventions.help;#P window setfont "Sans Serif" 20.;#P comment 12 21 301 196628 Ambisonic Rotation;#P window setfont "Sans Serif" 9.;#P window linecount 4;#P comment 319 23 300 196617 Inspired by work on a C++ implementation by Jorge Castellanos \, Florian Hollerweger and Graham Wakefield \, using the CSL framework developed at MAT/CREATE \, UCSB (www.create.ucsb.edu/CSL);#P window linecount 1;#P hidden newex 269 304 66 196617 loadmess 90;#P user number~ 98 206 137 221 9 3 3 1 0. 0. 0 0. 250 0. 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 98 227 49 196617 %~ 360.;#P flonum 243 432 35 9 0. 0 1 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 243 455 43 196617 gain \$1;#P comment 98 187 102 196617 Azimuth \, Elevation:;#P flonum 481 304 67 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 481 328 43 196617 % 360.;#P message 481 351 55 196617 tumble \$1;#P flonum 410 304 67 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 410 328 43 196617 % 360.;#P message 410 351 39 196617 tilt \$1;#P user number~ 163 206 211 221 9 3 1 1 0. 0. 0 0. 250 0. 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 163 227 49 196617 %~ 360.;#P flonum 339 304 67 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 339 328 43 196617 % 360.;#P message 339 351 53 196617 rotate \$1;#P comment 214 496 141 196617 [defaults to a horizontal ring];#P comment 214 481 134 196617 3-D \, 1st order \, 4 speakers;#P user umenu 251 352 65 196647 1 64 368 1;#X add radians;#X add degrees;#P message 206 455 33 196617 dump;#P message 210 352 33 196617 dump;#P newex 33 599 140 196617 dac~ 1 2 3 4;#P user meter~ 142 511 155 579 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 108 511 121 579 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 85 511 98 579 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 47 511 60 579 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P newex 33 480 141 196617 ambi.decode~ 3d 1st 4;#P user meter~ 142 297 155 365 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 108 297 121 365 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 85 297 98 365 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 47 297 60 365 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P message 219 238 33 196617 dump;#P flonum 161 98 48 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P user umenu 254 214 65 196647 1 64 230 1;#X add radians;#X add degrees;#P message 254 238 53 196617 angles \$1;#P newex 33 265 140 196617 ambi.encode~ 3d 1st degrees;#P user umenu 33 119 66 196647 1 64 135 1;#X add none;#X add noise;#X add rect;#X add audio input;#P newex 33 151 233 196617 selector~ 3 2;#P newex 161 119 44 196617 rect~ 5;#P newex 107 119 39 196617 noise~;#P comment 33 99 72 196617 select source:;#P comment 339 282 178 196617 Transform the ambisonic sound field:;#P user meter~ 142 405 155 473 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 108 405 121 473 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 85 405 98 473 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 47 405 60 473 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P newex 33 375 141 196617 ambi.rotate~ 3d 1st degrees;#P user panel 30 284 146 191;#X brgb 208 228 254;#X frgb 84 172 230;#X border 2;#X rounded 0;#X shadow 0;#X done;#P connect 11 0 10 0;#P fasten 16 0 12 0 224 262 38 262;#P fasten 13 0 12 0 259 262 38 262;#P connect 10 0 12 0;#P connect 12 0 1 0;#P fasten 40 0 1 0 486 372 38 372;#P fasten 37 0 1 0 415 372 38 372;#P fasten 32 0 1 0 344 372 38 372;#P fasten 27 0 1 0 215 372 38 372;#P connect 1 0 21 0;#P fasten 67 0 21 0 296 476 38 476;#P fasten 28 0 21 0 211 476 38 476;#P fasten 44 0 21 0 248 476 38 476;#P connect 21 0 26 0;#P fasten 60 0 26 0 202 587 38 587;#P fasten 61 0 26 0 272 587 38 587;#P connect 12 0 17 0;#P connect 1 0 2 0;#P connect 21 0 22 0;#P connect 12 1 1 1;#P connect 1 1 21 1;#P connect 21 1 26 1;#P connect 12 1 18 0;#P connect 1 1 3 0;#P connect 21 1 23 0;#P connect 47 0 46 0;#P connect 46 0 12 1;#P fasten 8 0 10 1 112 140 112 140;#P connect 12 2 19 0;#P connect 1 2 4 0;#P connect 21 2 24 0;#P connect 12 2 1 2;#P connect 1 2 21 2;#P connect 21 2 26 2;#P connect 12 3 20 0;#P connect 1 3 5 0;#P connect 21 3 25 0;#P connect 15 0 9 0;#P connect 12 3 1 3;#P connect 1 3 21 3;#P connect 21 3 26 3;#P connect 36 0 35 0;#P connect 35 0 12 2;#P fasten 9 0 10 2 166 143 186 143;#P hidden connect 69 0 45 0;#P connect 45 0 44 0;#P connect 14 0 13 0;#P fasten 62 1 10 3 260 144 260 144;#P fasten 62 0 10 3 239 144 260 144;#P hidden connect 70 0 68 0;#P connect 68 0 67 0;#P hidden connect 48 0 34 0;#P connect 34 0 33 0;#P connect 33 0 32 0;#P connect 39 0 38 0;#P connect 38 0 37 0;#P connect 42 0 41 0;#P connect 41 0 40 0;#P hidden connect 79 0 75 0;#P hidden connect 83 0 75 0;#P hidden connect 82 0 75 0;#P hidden connect 78 0 75 0;#P hidden connect 77 0 75 0;#P hidden connect 81 0 75 0;#P hidden connect 75 0 76 0;#P pop;